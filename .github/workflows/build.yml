on: 
    push:
        branches: ["main"]
    pull_request:
        branches: ["main"]
    workflow_dispatch:

jobs:
    build:
        runs-on: ${{ matrix.os }}
        strategy:
            matrix:
                os: [ windows-latest,ubuntu-latest,macos-latest ]
        steps:
            - uses: actions/checkout@v4
            - uses: actions/setup-java@v4
              with: 
                distribution: 'corretto'
                java-version: '21'
                cache: 'maven'
                cache-dependency-path: 'pom.xml'
              name: Build with Maven
            - run: mvn package
            - run: mkdir staging && cp target/*.jar staging
            - uses: actions/upload-artifact@v4
              with:
                name: package
                path: staging